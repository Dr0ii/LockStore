{"version":3,"file":"js/520.59e8930a.js","mappings":"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","sources":["webpack://lockstore/./src/views/WindowsResourcesView.vue","webpack://lockstore/src/views/WindowsResourcesView.vue","webpack://lockstore/./src/views/WindowsResourcesView.vue?4202","webpack://lockstore/./src/views/WindowsResourcesView.vue?9576"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"ResourcesView\"}},[_c('head-bar',{attrs:{\"title\":\"锁头库\",\"backBtn\":\"\"}}),_c('search-bar',{on:{\"searchValue\":_vm.getSearch,\"deleteSearchValue\":_vm.deleteSearchValue}}),(!_vm.searchData)?_c('body-card',{attrs:{\"color-title\":_vm.title,\"data\":_vm.locksData},on:{\"downLoadClick\":_vm.downLoadClick}}):_vm._e(),(_vm.searchData)?_c('body-card',{attrs:{\"title\":\"搜索结果\",\"data\":_vm.searchData},on:{\"downLoadClick\":_vm.downLoadClick}}):_vm._e(),_c('bottom'),_c('van-dialog',{attrs:{\"title\":\"下载\",\"confirmButtonText\":\"取消\",\"confirmButtonColor\":\"#6CC8AE\"},model:{value:(_vm.downLoadCardSta),callback:function ($$v) {_vm.downLoadCardSta=$$v},expression:\"downLoadCardSta\"}},[_c('div',{staticClass:\"downLoad\"},[(_vm.content)?_c('p',{staticClass:\"downLoad-content\"},[_vm._v(_vm._s(_vm.content))]):_vm._e(),_vm._l((_vm.downLoadData),function(item,index){return _c('span',{key:index,style:(_vm._f(\"lockTypeBackgroundColor\")(item.lock_type)),on:{\"click\":function($event){return _vm.downLoad(item.dowmload_src)}}},[_c('p',[_vm._v(_vm._s(_vm._f(\"lockTypeText\")(item.lock_type)))])])})],2)])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"ResourcesView\">\n    <head-bar title=\"锁头库\" backBtn></head-bar>\n    <search-bar @searchValue=\"getSearch\" @deleteSearchValue=\"deleteSearchValue\"></search-bar>\n    <body-card :color-title=\"title\" :data=\"locksData\" @downLoadClick=\"downLoadClick\" v-if=\"!searchData\"></body-card>\n    <body-card title=\"搜索结果\" :data=\"searchData\" @downLoadClick=\"downLoadClick\" v-if=\"searchData\"></body-card>\n    <bottom></bottom>\n    <van-dialog v-model=\"downLoadCardSta\" title=\"下载\" confirmButtonText=\"取消\" confirmButtonColor=\"#6CC8AE\">\n      <div class=\"downLoad\">\n        <p class=\"downLoad-content\" v-if=\"content\">{{ content }}</p>\n        <span v-for=\"(item, index) in downLoadData\" :key=\"index\" :style=\"item.lock_type | lockTypeBackgroundColor\" @click=\"downLoad(item.dowmload_src)\">\n          <p>{{ item.lock_type | lockTypeText }}</p>\n        </span>\n      </div>\n    </van-dialog>\n </div>\n</template>\n<style lang=\"scss\" scoped>\n#ResourcesView{\n  width: 400px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  .downLoad{\n    width: 80%;\n    display: flex;\n    justify-content: center;\n    flex-direction: column;\n    position: relative;\n    left: 50%;\n    transform: translate(-50%, 0);\n    .downLoad-content{\n      margin-top: 15px;\n      color: #787878;\n    }\n    span{\n      width: 100%;\n      height: 45px;\n      border-radius: 20px;\n      margin: 6px 0px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      font-weight: bolder;\n      transition: all .3s;\n    }\n    span:first-of-type{\n      margin-top: 20px;\n    }\n    span:last-of-type{\n      margin-bottom: 20px;\n    }\n  }\n}\n</style>\n<script>\nimport axios from 'axios'\nimport headBar from '@/components/headBar.vue'\nimport searchBar from '@/components/searchBar.vue'\nimport bodyCard from '@/components/bodyCard.vue'\nimport bottom from '@/components/bottom.vue'\nconst ip = 'http://150.158.149.195:33666/'\nconst userApi = `${ip}api/user/`\nconst adminApi = `${ip}api/admin/`\nconst otherApi = `${ip}api/other/`\nexport default {\n  name: 'WindowsResourcesView',\n  components: {\n    headBar,\n    searchBar,\n    bodyCard,\n    bottom\n  },\n  data () {\n    return {\n      locksData: null,\n      locksDataLength: null,\n      searchData: null,\n      downLoadCardSta: false,\n      downLoadData: null,\n      lockTypeBackgroundColor: null,\n      content: null\n    }\n  },\n  mounted () {\n    this.require()\n  },\n  methods: {\n    require () {\n      axios.get(otherApi + 'allLocks').then(res => {\n        res = res.data\n        if (res.sta) {\n          this.locksData = res.data\n          this.locksDataLength = res.data.length\n        } else this.$store.commit('tips', res.msg)\n      }).catch(err => {\n        this.$store.commit('tips', `错误：${err.message}`)\n      })\n    },\n    getSearch (value) { // 获取搜索框内容\n      let valueUpperCaseSta = false\n      for (let i = 0; i < value.length; i++) {\n        if (value[i] === value[i].toUpperCase()) {\n          valueUpperCaseSta = true\n          break\n        }\n      }\n      let result = this.locksData.filter(item => {\n        if (valueUpperCaseSta) return item.name.toUpperCase().includes(value)\n        else return item.name.toLowerCase().includes(value)\n      })\n      if (result.length === 0) {\n        result = this.locksData.filter(item => {\n          return item.type.includes(value)\n        })\n        if (result.length === 0) {\n          this.searchData = null\n          this.$store.commit('tips', '未搜索到相关内容')\n        } else return this.searchData = result\n     } else return this.searchData = result\n    },\n    deleteSearchValue () {\n      this.searchData = null\n    },\n    downLoadClick (data) {\n      const lockId = data.split('|')[0]\n      const content = data.split('|')[1]\n      axios.get(otherApi + 'lockFiles', {\n        params: {\n          id: lockId\n        }\n      }).then(res => {\n        const resStatus = res.status == 200\n        res = res.data\n        if (res.sta) {\n          this.content = content == 'null' || content == '' ? '' : `\" ${content} \"`\n          this.downLoadCardSta = true\n          this.downLoadData = res.data\n        } else this.$store.commit('tips', res.msg)\n        resStatus && this.$store.state.downLoadSta ? this.$store.commit('loading', false) : null\n        this.$store.commit('changeDownLoadSta', false)\n      }).catch(err => {\n        this.$store.commit('tips', `错误：${err.message}`)\n      })\n    },\n    downLoad (src) {\n      window.location.href = src\n    }\n  },\n  computed: {\n    title () {\n      return `共有 ${this.locksDataLength} 个锁头`\n    }\n  },\n  filters: {\n    lockTypeBackgroundColor (type) {\n      const black = 'background:#000000;color:#ffffff;'\n      const white = 'border: 2px solid #000000;box-sizing: border-box;color:#000000;'\n      const color = 'background:linear-gradient(45deg, #64bfe9, #74d178);color:#ffffff;'\n      return type === 0 ? black : type === 1 ? white : type === 2 ? color : null\n    },\n    lockTypeText (type) {\n      return type === 0 ? '黑色' : type === 1 ? '白色' : type === 2 ? '彩色' : null\n    }\n  }\n}\n</script>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./WindowsResourcesView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./WindowsResourcesView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./WindowsResourcesView.vue?vue&type=template&id=6871288e&scoped=true&\"\nimport script from \"./WindowsResourcesView.vue?vue&type=script&lang=js&\"\nexport * from \"./WindowsResourcesView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./WindowsResourcesView.vue?vue&type=style&index=0&id=6871288e&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6871288e\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","attrs","on","getSearch","deleteSearchValue","searchData","_e","title","locksData","downLoadClick","model","value","downLoadCardSta","callback","$$v","expression","staticClass","content","_v","_s","_l","downLoadData","item","index","key","style","_f","lock_type","$event","downLoad","dowmload_src","staticRenderFns","ip","otherApi","name","components","headBar","searchBar","bodyCard","bottom","data","locksDataLength","lockTypeBackgroundColor","mounted","require","methods","axios","then","res","sta","length","$store","commit","msg","catch","err","message","valueUpperCaseSta","i","toUpperCase","result","filter","includes","toLowerCase","type","lockId","split","params","id","resStatus","status","state","downLoadSta","src","window","location","href","computed","filters","black","white","color","lockTypeText","component"],"sourceRoot":""}